---
import Layout from "../layouts/Layout.astro";

// On récupère toutes les séries
const series = await Astro.glob("../content/series/*.md");

// On rassemble toutes les images des séries
let allImages = [];

for (const serie of series) {
  const imgs = serie.frontmatter.images || [];
  allImages = allImages.concat(imgs.map(i => i.url));
}

// Choix aléatoire
const hero = allImages.length
  ? allImages[Math.floor(Math.random() * allImages.length)]
  : null;
---

<Layout title="Raphaelle Brui">
  <main class="hero">
    {hero ? (
      <img src={hero} alt="" />
    ) : (
      <div class="no-image">Aucune image n'est disponible</div>
    )}

    <div class="overlay"></div>
  </main>

  <style>
    .hero {
      width: 100%;
      height: 100vh;
      overflow: hidden;
      position: relative;
    }

    .hero img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center;
      display: block;
    }

    .no-image {
      width: 100%;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #aaa;
      font-size: 1.2rem;
    }

    /* overlay futur */
    .overlay {
      position: absolute;
      bottom: 2rem;
      left: 2rem;
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(6px);
      padding: 1rem 1.5rem;
      border-radius: 6px;
      display: none; /* on l'activera quand on mettra du contenu */
    }
  </style>
</Layout>
